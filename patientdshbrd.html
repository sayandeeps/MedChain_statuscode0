<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Account Settings UI Design</title>
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script src="https://cdn.tailwindcss.com"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.2.7-rc.0/web3.min.js"></script>

</head>
<body>
	<div class="bg-gradient-to-br from-gray-700 via-gray-900 to-black">
		<div class="flex items-center space-x-4 pt-6">
            <img class="w-10 h-10 rounded-full" src="https://cdn-icons-png.flaticon.com/128/3135/3135715.png" alt="">
            <div class="font-medium dark:text-white">
                <div>Connected Account</div>
                <div class="text-sm text-gray-500 dark:text-gray-400" id="accountArea">Your Metamask Address</div>
            </div>
        </div>
	<section class="py-5 ">
		<div class="container">
			<h1 class="text-4xl font-extrabold text-gray-900 dark:text-white">Patient's Account</h1>
			<div class="bg-white shadow rounded-lg d-block d-sm-flex">
				<div class="profile-tab-nav border-right">
					<div class="p-4">
						<div class="img-circle text-center mb-3">
							<img src="https://cdn-icons-png.flaticon.com/128/3135/3135715.png" alt="Image" class="shadow">
						</div>
						<h4 class="text-center">Patient's Name</h4>
					</div>
					<div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
						<a class="nav-link" id="notification-tab" data-toggle="pill" href="#notification" role="tab" aria-controls="notification" aria-selected="false">
							<i class="fa fa-bell text-center mr-1"></i> 
							User Details
						</a>
						<a class="nav-link active" id="account-tab" data-toggle="pill" href="#account" role="tab" aria-controls="account" aria-selected="true">
							<i class="fa fa-home text-center mr-1"></i> 
							Edit User Details
						</a>
						<a class="nav-link" id="password-tab" data-toggle="pill" href="#password" role="tab" aria-controls="password" aria-selected="false">
							<i class="fa fa-key text-center mr-1"></i> 
							Give Access
						</a>
						<a class="nav-link" id="security-tab" data-toggle="pill" href="#security" role="tab" aria-controls="security" aria-selected="false">
							<i class="fa fa-user text-center mr-1"></i> 
							Revoke Access
						</a>
						<a class="nav-link" id="application-tab" data-toggle="pill" href="#application" role="tab" aria-controls="application" aria-selected="false">
							<i class="fa fa-tv text-center mr-1"></i> 
							See Appointment Details
						</a>
						
					</div>
				</div>
				<div class="tab-content p-4 p-md-5" id="v-pills-tabContent">
					<div class="tab-pane fade show active" id="account" role="tabpanel" aria-labelledby="account-tab">
						<h3 class="mb-4">Update Patient Details</h3>
						<form id="form1" action="#">
						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
								  	<label>Name</label>
								  	<input type="text" class="form-control" placeholder="Patient's Name" id="name1">
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group">
								  	<label>Age</label>
								  	<input type="text" class="form-control" placeholder="Age" id="age">
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group">
								  	<label>Gender</label>
								  	<input type="text" class="form-control" placeholder="Gender" id="gen">
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group">
								  	<label>Height & Weight</label>
								  	<input type="text" class="form-control" placeholder="Height and Weight" id="hghtandwt">
								</div>
							</div>
							<div class="col-md-12">
								<div class="form-group">
								  	<label>Patient History</label>
								  	<input type="text" class="form-control" placeholder="Previous History" id="patienthist">
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group">
								  	<label>Address</label>
								  	<input type="text" class="form-control" placeholder="Address" id="addr">
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group">
								  	<label>Phone Number</label>
								  	<input type="text" class="form-control" placeholder="number" id="pno">
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group">
								  	<label>Date of Birth</label>
								  	<input type="text" class="form-control" placeholder="Enter your date of birth" id="dob">
								</div>
							</div>
						</div>
						<div>
							<button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">Submit</button>
						</div>
						</form>
					</div>
					<div class="tab-pane fade" id="password" role="tabpanel" aria-labelledby="password-tab">
						<h3 class="mb-4">Give Access</h3>
						<form id="form2" action="#">
						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
								  	<label>Enter the address whom you want to give access:</label>
								  	<input type="text" class="form-control" id="addr2">
								</div>
							</div>
						</div>
						
						<div>
							<button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">Give Access</button>
						</div>
						</form>
					</div>
					<div class="tab-pane fade" id="security" role="tabpanel" aria-labelledby="security-tab">
						<h3 class="mb-4">Revoke Access</h3>
						<form id="form3" action="#">
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										  <label>Enter the address whom you want to revoke access from:</label>
										  <input type="text" class="form-control" id="addr3">
									</div>
								</div>
							</div>
							
							<div>
								<button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">Revoke Access</button>
							</div>
							</form>
					</div>
					<div class="tab-pane fade" id="application" role="tabpanel" aria-labelledby="application-tab">
						<h3 class="mb-4">Appointment Details</h3>

 
    <label for="default-search" class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
    <div class="relative">
        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            
               
        </div>
        <input type="text" id="patientAddress" class="block w-full p-4 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 p-4" placeholder="">
        <button onclick="readContract4()" class="text-white absolute right-2.5 bottom-2.5 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-3">Search</button>
    </div>


							<div class="row">
								
								
								<div class="col-md-6">
									<div class="form-group">
										  <label>Date</label>
										  <p id="date4" class="text-2xl font-medium text-gray-900 ">Appointment Date</p>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										  <label>Time</label>
										  <p id="time4" class="text-2xl font-medium text-gray-900 ">Appointment Time</p>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										  <label>Description</label>
										  <p id="des4" class="text-2xl font-medium text-gray-900 ">Description</p>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										  <label>Diagnosis</label>
										  <p id="diag4" class="text-2xl font-medium text-gray-900 ">Diagnosis</p>
									</div>
								</div>
								<div class="col-md-12">
									<div class="form-group">
										  <label>Status</label>
										  <p id="status4" class="text-2xl font-medium text-gray-900 ">Status</p>
									</div>
								</div>
								
								
								
							</div>
							
							
					</div>
					<div class="tab-pane fade" id="notification" role="tabpanel" aria-labelledby="notification-tab">
						<h3 class="mb-4">User Details</h3>

 
    <label for="default-search" class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
    <div class="relative">
        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            
               
        </div>
        <input type="text" id="patientAddress7" class="block w-full p-4 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 p-4" placeholder="">
        <button onclick="readContract7()" class="text-white absolute right-2.5 bottom-2.5 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-3">Search</button>
    </div>


	
		<div class="row">
			<div class="col-md-6">
				<div class="form-group">
					  <label>Name</label>
					  <p id="name7" class="text-2xl font-medium text-gray-900 ">Name</p>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					  <label>Age</label>
					  <p id="age7" class="text-2xl font-medium text-gray-900 ">Age</p>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					  <label>Gender</label>
					  <p id="gen7" class="text-2xl font-medium text-gray-900 ">Gender</p>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					  <label>Height & Weight</label>
					  <p id="hghtandwt7" class="text-2xl font-medium text-gray-900 ">Height & Weight</p>
				</div>
			</div>
			<div class="col-md-12">
				<div class="form-group">
					  <label>Patient History</label>
					  <p id="patienthist7" class="text-2xl font-medium text-gray-900 ">Patient's Medical History</p>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					  <label>Address</label>
					  <p id="addr7" class="text-2xl font-medium text-gray-900 ">Address</p>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					  <label>Phone Number</label>
					  <p id="pno7" class="text-2xl font-medium text-gray-900 ">Phone Number</p>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					  <label>Date of Birth</label>
					  <p id="dob7" class="text-2xl font-medium text-gray-900 ">Description</p>
				</div>
			</div>
		</div>
		<!-- <div>
			<button onclick="readContract7()" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">Submit</button>
		</div> -->
		
							
							
					</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</div>


	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
	<script>
        const namei=document.getElementById("name1")
        const agei=document.getElementById("age")
        const geni=document.getElementById("gen")
        const heightandweighti=document.getElementById("hghtandwt")
        const patienthisti=document.getElementById("patienthist")
        const addressi=document.getElementById("addr")
        const phoneNumberi= document.getElementById("pno")
        const dobi = document.getElementById("dob")
        const form = document.getElementById("form1")
		const form2 = document.getElementById("form2")
		const addr2i=document.getElementById("addr2")
		const addr3i=document.getElementById("addr3")
		const form3 = document.getElementById("form3")
		const time4i=document.getElementById("time4")
		const date4i=document.getElementById("date4")
		const des4i=document.getElementById("des4")
		const diag4i=document.getElementById("diag4")
		const status4i=document.getElementById("status4")




        //1- connect metamask
        let account;
        const connectMetamask = async () => {

            
            const ABI = [
			{
				"inputs": [
					{
						"internalType": "string",
						"name": "_doctor_name",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_doctor_specialisation",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "_doctor_ph_no",
						"type": "uint256"
					},
					{
						"internalType": "string",
						"name": "_doctor_qualification",
						"type": "string"
					}
				],
				"name": "editDoc",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "string",
						"name": "_patient_name",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "_age",
						"type": "uint256"
					},
					{
						"internalType": "string",
						"name": "_gender",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_heightandweight",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_medicalhist",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "_phone_no",
						"type": "uint256"
					},
					{
						"internalType": "string",
						"name": "_patient_home_adr",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "_dob",
						"type": "uint256"
					}
				],
				"name": "editPatients",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "docaddr",
						"type": "address"
					}
				],
				"name": "givePermission",
				"outputs": [
					{
						"internalType": "bool",
						"name": "success",
						"type": "bool"
					}
				],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "docaddr",
						"type": "address"
					}
				],
				"name": "RevokePermission",
				"outputs": [
					{
						"internalType": "bool",
						"name": "success",
						"type": "bool"
					}
				],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "_patientaddr",
						"type": "address"
					},
					{
						"internalType": "string",
						"name": "_date",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_time",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_description",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_diagnosis",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_status",
						"type": "string"
					}
				],
				"name": "setAppointments",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "string",
						"name": "_doctor_name",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_doctor_specialisation",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "_doctor_ph_no",
						"type": "uint256"
					},
					{
						"internalType": "string",
						"name": "_doctor_qualification",
						"type": "string"
					},
					{
						"internalType": "address",
						"name": "_docaddr",
						"type": "address"
					}
				],
				"name": "setDoc",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "string",
						"name": "_patient_name",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "_age",
						"type": "uint256"
					},
					{
						"internalType": "string",
						"name": "_gender",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_heightandweight",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_medicalhist",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "_phone_no",
						"type": "uint256"
					},
					{
						"internalType": "string",
						"name": "_patient_home_adr",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "_dob",
						"type": "uint256"
					}
				],
				"name": "setPatients",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [],
				"stateMutability": "nonpayable",
				"type": "constructor"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "_patientaddr",
						"type": "address"
					},
					{
						"internalType": "string",
						"name": "_date",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_time",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_description",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_diagnosis",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "_status",
						"type": "string"
					}
				],
				"name": "updateAppointments",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					}
				],
				"name": "appointmentList",
				"outputs": [
					{
						"internalType": "address",
						"name": "",
						"type": "address"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					}
				],
				"name": "doctorList",
				"outputs": [
					{
						"internalType": "address",
						"name": "",
						"type": "address"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [],
				"name": "getAppointments",
				"outputs": [
					{
						"internalType": "address[]",
						"name": "",
						"type": "address[]"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [],
				"name": "getDoctors",
				"outputs": [
					{
						"internalType": "address[]",
						"name": "",
						"type": "address[]"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [],
				"name": "getPatients",
				"outputs": [
					{
						"internalType": "address[]",
						"name": "",
						"type": "address[]"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [],
				"name": "owner",
				"outputs": [
					{
						"internalType": "address",
						"name": "",
						"type": "address"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					}
				],
				"name": "patientList",
				"outputs": [
					{
						"internalType": "address",
						"name": "",
						"type": "address"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "patientaddr",
						"type": "address"
					}
				],
				"name": "searchAppointment",
				"outputs": [
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "_address",
						"type": "address"
					}
				],
				"name": "searchAppointmentDate",
				"outputs": [
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "docaddr",
						"type": "address"
					}
				],
				"name": "searchDoc",
				"outputs": [
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					},
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "patientaddr",
						"type": "address"
					}
				],
				"name": "searchPatient",
				"outputs": [
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					},
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					},
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					},
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "_address",
						"type": "address"
					}
				],
				"name": "searchRecordDate",
				"outputs": [
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					}
				],
				"stateMutability": "view",
				"type": "function"
			}
		]
			const Address = "0x8d2aBD65416671233d63414Fd39971154f6474e5";
            window.web3 = await new Web3(window.ethereum);
            window.contract = await new window.web3.eth.Contract( ABI, Address); 
            //document.getElementById("contractArea").innerHTML = "connected to smart contract"; 
        }

        //3-read data from smart contract
        form1.addEventListener("submit",async (e)=>{
            e.preventDefault()
            try{
                if(window.ethereum !== "undefined") {
                    const accounts = await ethereum.request({method: "eth_requestAccounts"});
                    account = accounts[0];
                     document.getElementById("accountArea").innerText = account;
                     
                 } 
                 const name = namei.value;
                 const age = parseInt(agei.value);
                 const gender = geni.value;
                 const heightandweight = heightandweighti.value;
                 const patienthist = patienthisti.value;
                 const address = addressi.value;
                 const phoneNumber = parseInt(phoneNumberi.value);
                 const dob = parseInt(dobi.value);
               // console.log(name)
              //  console.log(age)
               // console.log(gender)
               // console.log(height)
               // console.log(weight)
                //console.log(address)
                //console.log(phoneNumber)
                //console.log(dob)
                await contract.methods
                .editPatients(name, age, gender, heightandweight, patienthist, phoneNumber, address, dob)
                .send({ from: account });
        
              console.log("Patient details updated successfully!");
                 
            }catch(e){
                alert("Some Error Occured")
                console.log(e)
            }

        })
		form2.addEventListener("submit",async (e)=>{
            e.preventDefault()
            try{
                if(window.ethereum !== "undefined") {
                    const accounts = await ethereum.request({method: "eth_requestAccounts"});
                    account = accounts[0];
                     document.getElementById("accountArea").innerText = account;
                     
                 } 
                 const addr2 = addr2i.value;
                 
                await contract.methods
                .givePermission(addr2)
                .send({ from: account });
        
              alert("Granted user access successfully");
                 
            }catch(e){
                alert("Some Error Occured")
                console.log(e)
            }

        })
		form3.addEventListener("submit",async (e)=>{
            e.preventDefault()
            try{
                if(window.ethereum !== "undefined") {
                    const accounts = await ethereum.request({method: "eth_requestAccounts"});
                    account = accounts[0];
                     document.getElementById("accountArea").innerText = account;
                     
                 } 
                 const addr3 = addr3i.value;
                 
                await contract.methods
                .RevokePermission(addr3)
                .send({ from: account });
        
              alert("Granted user access successfully");
                 
            }catch(e){
                alert("Some Error Occured")
                console.log(e)
            }

        })
		const readContract4 = async () => {
            const patientAddressInput = document.getElementById("patientAddress");
            const patientAddress = patientAddressInput.value;
        
                       if(window.ethereum !== "undefined") {
               const accounts = await ethereum.request({method: "eth_requestAccounts"});
               account = accounts[0];
                document.getElementById("accountArea").innerText = account;
            }
            contract.methods.searchAppointment(patientAddress).call({ from: account }, (error, result) => {
                if (error) {
                  alert("You are not authorised")
                  document.getElementById('date4').innerText = "n/a";
                  document.getElementById('time4').innerText = "n/a";
                  document.getElementById('des4').innerText = "n/a";
                   document.getElementById('diag4').innerText = "n/a";
                   document.getElementById('status4').innerText = "n/a";
                } else {
                    //const patientName = result[0];
                    //const age = result[1];
                    //const gender = result[2];
                    //const heightandweight = result[3];
                    //const medicalhist = result[4];
                    //const phoneNo = result[5];
                    //const patientAddress = result[6];
                    //const dob = result[7];
                            // Display the patient details on the frontend
        document.getElementById('date4').innerText = result[0];
       document.getElementById('time4').innerText = result[1];
       document.getElementById('des4').innerText = result[2];
        document.getElementById('diag4').innerText = result[3];
        document.getElementById('status4').innerText = result[4];
               
                }
            })};

			const readContract7 = async () => {
				const patientAddressInput7 = document.getElementById("patientAddress7");
				const patientAddress7 = patientAddressInput7.value;
			
						   if(window.ethereum !== "undefined") {
				   const accounts = await ethereum.request({method: "eth_requestAccounts"});
				   account = accounts[0];
					document.getElementById("accountArea").innerText = account;
				}
				contract.methods.searchPatient(patientAddress7).call({ from: account }, (error, result) => {
					if (error) {
					  alert("You are not authorised")
					  document.getElementById('name7').innerText = "n/a";
					  document.getElementById('age7').innerText = "n/a";
					  document.getElementById('gen7').innerText = "n/a";
					   document.getElementById('hghtandwt7').innerText = "n/a";
					   document.getElementById('patienthist7').innerText = "n/a";
					   document.getElementById('pno7').innerText = "n/a";
					   document.getElementById('addr7').innerText = "n/a";
					   document.getElementById('dob7').innerText = "n/a";
					} else {
						const patientName = result[0];
						const age = result[1];
						const gender = result[2];
						const heightandweight = result[3];
						const medicalhist = result[4];
						const phoneNo = result[5];
						const patientAddress = result[6];
						const dob = result[7];
								// Display the patient details on the frontend
								document.getElementById('name7').innerText = result[0];
								document.getElementById('age7').innerText = result[1];
								document.getElementById('gen7').innerText = result[2];
								 document.getElementById('hghtandwt7').innerText = result[3];
								 document.getElementById('patienthist7').innerText = result[4];
								 document.getElementById('pno7').innerText = result[5];
								 document.getElementById('addr7').innerText = result[6];
								 document.getElementById('dob7').innerText = result[7];
				   
					}
				})};
         
            window.onload=connectMetamask()
    </script>
</body>
</html>